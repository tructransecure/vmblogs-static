{"id":1370,"date":"2015-06-17T09:17:11","date_gmt":"2015-06-17T02:17:11","guid":{"rendered":"http:\/\/vmblogs.vn\/?p=1370"},"modified":"2015-06-17T09:54:47","modified_gmt":"2015-06-17T02:54:47","slug":"install-synology-dsm-5-0-on-vps","status":"publish","type":"post","link":"http:\/\/vmblogs.vn\/install-synology-dsm-5-0-on-vps\/","title":{"rendered":"Install Synology DSM 5.0 on VPS"},"content":{"rendered":"<p><span style=\"color: #0000ff;\"><strong>Install Synology DSM 5.0 on VPS<\/strong><\/span><\/p>\n<p>Hi everyone, in this post i&#8217;m going to show you how to install Synology DSM 5.0 on your VPS.<\/p>\n<p>Please have a look at tutorial below to install DSM 5.0 on VPS. I use DigitalOcean droplet to make this tutorial<\/p>\n<h1>How To Install Virtualbox Headless on CentOS 6.6<\/h1>\n<h3>Goal<\/h3>\n<p>After this tutorial, we are going to have fully functional headless VirtualBox server<\/p>\n<h3>Requirements<\/h3>\n<ul>\n<li>1 CentOS 6.6 droplet (1GB RAM)<\/li>\n<li>VirtualBox 4.3.28 (Linux version)<\/li>\n<li>Extension pack<\/li>\n<li>phpVirtualBox<\/li>\n<li>Nanoboot 5.0 32bit (link provided at the end of this post)<\/li>\n<li>DSM 5.0 from Synology<\/li>\n<li>You know how to use Virtualbox<\/li>\n<\/ul>\n<h2>Prepare droplet<\/h2>\n<p>Oracle VirtualBox can not work with CentOS latest kernel 2.6.32.504. We have to switch back to older version 2.6.32.431<\/p>\n<p>You can easily switch your kernel version by change kernel in your account Dashboard<\/p>\n<p><img decoding=\"async\" src=\"http:\/\/i.imgur.com\/OZcwfHo.png\" alt=\"Change droplet kernel\" \/><\/p>\n<p>Start and get access to your droplet<\/p>\n<ul>\n<li>Install neccesary package (epel-release, wget, nano)<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>yum install -y epel-release nano wget<\/code><\/span><\/p>\n<ul>\n<li>Verify your kernel version<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>uname -r<\/code><\/span><\/p>\n<ul>\n<li>Download additional kernel packages<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\">Go to any directory (Eg. \/opt)<\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>cd \/opt<\/code><\/span><\/p>\n<ul>\n<li>Download kernel-devel and kernel-headers<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/vmblogs.vn\/package\/kernel-devel-2.6.32-431.1.2.0.1.el6.x86_64.rpm<\/code><\/span><\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/vmblogs.vn\/package\/kernel-headers-2.6.32-431.1.2.0.1.el6.x86_64.rpm<\/code><\/span><\/p>\n<ul>\n<li>Install kernel-devel and kernel-headers<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>yum localinstall kernel-headers-2.6.32-431.1.2.0.1.el6.x86_64.rpm<\/code><\/span><\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>yum localinstall kernel-devel-2.6.32-431.1.2.0.1.el6.x86_64.rpm<\/code><\/span><\/p>\n<ul>\n<li>Exclude kernel packages from updating<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\">Edit the file\/etc\/yum.conf<\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>exclude=kernel*<\/code><\/span><\/p>\n<ul>\n<li>Update system<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>yum update -y<\/code><\/span><\/p>\n<h2>Install Development Tools<\/h2>\n<p>In order for VirtualBox to compile correctly, we have to install necessary tools<\/p>\n<p><span style=\"text-decoration: underline;\"><code>yum groupinstall \"Development Tools\" -y<\/code><\/span><\/p>\n<h2>Download and install Virtualbox<\/h2>\n<p>Download VirtualBox and other packages Go to<strong> <code>\/opt<\/code><\/strong><\/p>\n<ul>\n<li>Download latest stable version of VirtualBox<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/download.virtualbox.org\/virtualbox\/4.3.28\/VirtualBox-4.3.28-100309-Linux_amd64.run<\/code><\/span><\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/download.virtualbox.org\/virtualbox\/4.3.28\/Oracle_VM_VirtualBox_Extension_Pack-4.3.28-100309.vbox-extpack<\/code><\/span><\/p>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/dlc-cdn.sun.com\/virtualbox\/4.3.28\/VBoxGuestAdditions_4.3.28.iso<\/code><\/span><\/p>\n<p>Setup VirtualBox<\/p>\n<ul>\n<li>Allow VirtualBox to run<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>chmod +x VirtualBox-4.3.28-100309-Linux_amd64.run<\/code><\/span><\/p>\n<ul>\n<li>Setup VirtualBox<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>.\/VirtualBox-4.3.28-100309-Linux_amd64.run<\/code><\/span><\/p>\n<ul>\n<li>Install Extension package<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-4.3.28-100309.vbox-extpack<\/code><\/span><\/p>\n<p>Verify Extensions Package<\/p>\n<p><span style=\"text-decoration: underline;\"><code>VBoxManage list extpacks<\/code><\/span><\/p>\n<p>Compile VirtualBox driver<\/p>\n<p><span style=\"text-decoration: underline;\"><code>service vboxdrv setup<\/code><\/span><\/p>\n<p>Start and stop VirtualBox web service<\/p>\n<ul>\n<li>To start web service<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>vboxwebsrv<\/code><\/span><\/p>\n<ul>\n<li>To stop web service<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>Ctrl + C<\/code><\/span><\/p>\n<p>You may want to use <span style=\"color: #0000ff;\"><code>screen<\/code> <\/span>with <span style=\"color: #0000ff;\"><code>vboxwebsrv<\/code><\/span><\/p>\n<h2>Download and configure phpVirtualBox<\/h2>\n<p><strong>Setup httpd server<\/strong><\/p>\n<p><span style=\"text-decoration: underline;\"><code>yum install httpd php php-common php-soap<\/code><\/span><\/p>\n<p><strong>Download phpVirtualBox<\/strong><\/p>\n<ul>\n<li>Download phpVirtualBox<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>wget http:\/\/sourceforge.net\/projects\/phpvirtualbox\/files\/phpvirtualbox-4.3-3.zip\/download<\/code><\/span><\/p>\n<ul>\n<li>Rename download file<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>mv download phpVirtualbox.zip<\/code><\/span><\/p>\n<ul>\n<li>Extract download file<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>unzip phpVirtualbox.zip<\/code><\/span><\/p>\n<ul>\n<li>Rename extracted folder<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>mv phpVirtualbox-4.3-3 phpvirtualbox<\/code><\/span><\/p>\n<ul>\n<li>Move to web folder<\/li>\n<\/ul>\n<p style=\"padding-left: 60px;\"><span style=\"text-decoration: underline;\"><code>mv phpvirtualbox \/var\/www\/html<\/code><\/span><\/p>\n<p><strong>Config phpVirtualBox<\/strong><\/p>\n<p>Go to phpVirtualbox directory<\/p>\n<p><span style=\"text-decoration: underline;\"><code>cd \/var\/www\/html\/phpvirtualbox<\/code><\/span><\/p>\n<p>Rename config.php-sample<\/p>\n<p><span style=\"text-decoration: underline;\"><code>mv config.php-sample config.php<\/code><\/span><\/p>\n<p>Edit <strong>config.php<\/strong><\/p>\n<p><code>nano config.php<\/code><\/p>\n<blockquote><p>var $username = &#8216;your_root_account&#8217;;<\/p>\n<p>var $password = &#8216;your_root_password&#8217;;<\/p>\n<p>var $location = &#8216;http:\/\/127.0.0.1:18083\/&#8217;; do not modify this<\/p><\/blockquote>\n<p><strong>Create new setting file<\/strong><\/p>\n<p><span style=\"text-decoration: underline;\"><code>touch \/etc\/defaults\/virtualbox<\/code><\/span><\/p>\n<p>and edit <code>\/etc\/defaults\/virtualbox<\/code> with options below<\/p>\n<blockquote><p>VBOXWEB_USER=vbox<\/p>\n<p>VBOXWEB_HOST=127.0.0.1<\/p><\/blockquote>\n<p>Disable SELinux <code>\/etc\/selinux\/config<\/code><\/p>\n<blockquote><p>SELINUX=disabled<\/p><\/blockquote>\n<p>Add firewall rule to allow web access<\/p>\n<p><span style=\"text-decoration: underline;\"><code>iptables -A INPUT -p tcp --dport 80 -j ACCEPT<\/code><\/span><\/p>\n<p>Now start httpd server and access phpVirtuaBox<\/p>\n<p><span style=\"text-decoration: underline;\"><code>service httpd start<\/code><\/span><\/p>\n<p><span style=\"text-decoration: underline;\"><code>chkconfig httpd on<\/code><\/span><\/p>\n<p><span style=\"color: #0000ff;\">http:\/\/your-ip-address\/phpvirtualbox<\/span><\/p>\n<p>Default phpVirtualBox login<\/p>\n<blockquote><p>Username: admin<\/p>\n<p>Password: admin<\/p><\/blockquote>\n<h3><\/h3>\n<h3>Troubleshooting<\/h3>\n<p>phpVirtualBox can not login<\/p>\n<p>Run this command to fix login problem<\/p>\n<p><span style=\"text-decoration: underline;\"><code>VBoxManage setproperty websrvauthlibrary null<\/code><\/span><\/p>\n<h3>Notes<\/h3>\n<ul>\n<li>Although Virtualbox display 64bit at OS selection, you just can not use or your VMs will stop with Stuck error<\/li>\n<li>The performance is really low. I managed to install a XPenology (Synology opensource), it took about 15 minutes to boot up and login successfully<\/li>\n<li>Set CPU CAP at 70-80% for your VMs<\/li>\n<li>For better performance, you are advised to make swap file on your droplet. <a href=\"https:\/\/www.digitalocean.com\/community\/tutorials\/how-to-add-swap-on-centos-6\">Check this link on DO<\/a><\/li>\n<\/ul>\n<h3>XPenology<\/h3>\n<ul>\n<li>After get access to phpVirtualBox, you can create new VirtualBox VM for XPenology<\/li>\n<li>1core CPU<\/li>\n<li>512MB RAM<\/li>\n<li>HDD depend on your VPS<\/li>\n<li>CD with Nanoboot ISO mount at first boot<\/li>\n<li>No USB<\/li>\n<li>NAT network with port 5000 forward to VM (default VM IP is 10.0.2.15). You also need to open port in iptables to allow access from outside (5000)<\/li>\n<\/ul>\n<p><strong>Download links<\/strong><\/p>\n<p><a href=\"https:\/\/drive.google.com\/file\/d\/0BwJlgrW616foVnc5WUtuUlF3SzQ\/view?usp=sharing\">Nanoboot x86 ISO<\/a><\/p>\n<p><a href=\"https:\/\/drive.google.com\/file\/d\/0BwJlgrW616focUhlUzkyQlJHYkU\/view?usp=sharing\">DMS 5.0<\/a><\/p>\n<p><a href=\"https:\/\/drive.google.com\/file\/d\/0BwJlgrW616fodVZPampPVVlxdjA\/view?usp=sharing\">Pre-configured VM &#8211; ready to import<\/a><\/p>\n<p><strong>Username and password for pre-configured VM<\/strong><\/p>\n<p>Username: admin<br \/>\nPassword: Aa123456*<\/p>\n<p><img decoding=\"async\" src=\"http:\/\/i.imgur.com\/XrIbu6s.png\" alt=\"Demo-XPenology\" \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Install Synology DSM 5.0 on VPS Hi everyone, in this post i&#8217;m going to show you how to install Synology DSM 5.0 on your VPS. Please have a look at tutorial below to install DSM 5.0 on VPS. I use DigitalOcean droplet to make this tutorial How To Install Virtualbox Headless on CentOS 6.6 Goal <a class=\"more-link\" href=\"http:\/\/vmblogs.vn\/install-synology-dsm-5-0-on-vps\/\">Read More &#8230;<\/a><\/p>\n","protected":false},"author":1,"featured_media":358,"comment_status":"open","ping_status":"open","sticky":true,"template":"","format":"standard","meta":[],"categories":[22],"tags":[58,96],"_links":{"self":[{"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/posts\/1370"}],"collection":[{"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/comments?post=1370"}],"version-history":[{"count":0,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/posts\/1370\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/media\/358"}],"wp:attachment":[{"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/media?parent=1370"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/categories?post=1370"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/vmblogs.vn\/wp-json\/wp\/v2\/tags?post=1370"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}